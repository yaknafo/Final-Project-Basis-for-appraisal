
@model BasisForAppraisal_finalProject.ViewModel.FormViewModel
 @using BasisForAppraisal_finalProject.ViewModel
 @using BasisForAppraisal_finalProject.DBML
@using BasisForAppraisal_finalProject.Controllers.Enum


@{
    ViewBag.Title = "IntentionalFormWorkshop";
}
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/bootstrap.js"></script>
<script src="~/Scripts/bootstrap.min.js"></script>
<script src="~/Scripts/jquery-2.1.3.js"></script>
<script src="~/Scripts/jquery-2.1.3.min.js"></script>
<script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
<link href="~/Content/FontStyle.css" rel="stylesheet" />

<script type="text/javascript">
    $(function () {
        setTimeout(function () { $("#success-alert").fadeOut(1500); }, 2500)
        $('#btnclick').click(function () {
            $('#testdiv').show();
            setTimeout(function () { $("#testdiv").fadeOut(1500); }, 2500)
        })
    })
</script>

<script type="text/javascript">
    $(function () {
        setTimeout(function () { $("#danger-alert").fadeOut(1500); }, 2500)
        $('#btnclick').click(function () {
            $('#testdiv').show();
            setTimeout(function () { $("#testdiv").fadeOut(1500); }, 2500)
        })
    })
</script>


 @if (TempData["Success"] != null)
{

    <div class="alert alert-success" id="success-alert" style="text-align: right; ; margin-top:13%; position:fixed; align-self:center">
        <strong dir="rtl">@TempData["Success"] </strong>
    </div>
}

@if (TempData["Failed"] != null)
{

    <div class="alert alert-danger" id="danger-alert" style="text-align: right;margin-top:13%; position:fixed; align-self:center">
        <strong dir="rtl">@TempData["Failed"] </strong>
    </div>
}

<!-- if there ant changes the alret  will show up after add or remove-->
@if (TempData["changes"] != null)
{

   <div id="changes" class="alert-warning" role="grid" style=" display: block; width: 100%; height: 100%; position: fixed; margin-top:0%"><strong>Your Changes are not Saved</strong></div>

}

<!-- if there ant changes the alret  will show up after an type of the user-->
<div id="changes" class="alert-warning" role="grid" style=" display: none; width: 18%; height: 5%; position: fixed;"><span class="glyphicon glyphicon-comment" style="margin-right:4px;"></span><strong>Your Changes are not Saved</strong></div>



    <!-- Add button -->
    <div style="text-align: right; margin-left:82%; margin-top:16%; position:fixed">
        <button type="button" class="btn btn-primary btn-lg" title="הוספת שאלה" data-toggle="modal" data-target="#myModal" style="font-size: 18px; width: 160px;  background-color: AppWorkspace">
            <strong style="color:black;">מחוון</strong>
        </button>

        <!-- Add button free text question -->
            <button type="button" class="btn btn-primary btn-lg" title="הוספת שאלה טקסט חופשי" data-toggle="modal" data-target="#FreeTextQuestion" style="font-size: 18px; width: 160px;  background-color: AppWorkspace">
                <strong style="color:black;">טקסט חופשי</strong>
            </button>

        <!-- Add button scale question -->
        <button type="button" class="btn btn-primary btn-lg" title="הוספת שאלה קנה מידה" data-toggle="modal" data-target="#ScaleQuestion" style="font-size: 18px; width: 160px;  background-color: AppWorkspace">
            <strong style="color:black;">קנה מידה</strong>
        </button>

        <!-- Add button Muliti choise question         OnSuccess="CloseModels()"  -->
        <button type="button" class="btn btn-primary btn-lg"  title="הוספת שאלה בחירה מרובה" data-toggle="modal" data-target="#MultipleChoiceQuestion" style="font-size: 18px; width: 160px;  background-color: AppWorkspace">
        <strong style="color:black;">בחירה מרובה</strong></button>

        <!-- Add button Yes No Question -->
        <button type="button" class="btn btn-primary btn-lg" title="הוספת שאלה כן לא" data-toggle="modal" data-target="#YesNoQuestion" style="font-size: 18px; width: 160px;  background-color: AppWorkspace">
            <strong style="color:black;">כן לא</strong>
        </button>

        </div>


    @using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "post", InsertionMode = InsertionMode.ReplaceWith, UpdateTargetId = "yair", }))
{

    <div id="ActionBtn" style="position: fixed; margin-top: -13%; background-color: lightgrey; width: 100%; ">

        <!-- the exit button-->
        <button type="button" class="btn btn-primary btn-lg" title="back to manage Forms" data-toggle="modal" data-target="#exit" style="margin: 1%; width: 90px; background-color: black; ">
            <img src="~/photos/Login-Door-24.png" />
        </button>

        <!-- the save button-->
        <button type="submit" name="submit" value=@WorkShopActions.Save class="btn btn-primary btn-lg glyphicon glyphicon-floppy-disk" title="שמירת טופס" style="margin: 1%; width: 90px; background-color: black"></button>

        <!-- the delete button-->
        <button type="submit" name="submit" value=@WorkShopActions.Delete class="btn btn-primary btn-lg glyphicon glyphicon-remove-sign" title="מחיקת שאלות מסומנות " style="margin: 1%; width: 90px; background-color: black; "></button>

        <!-- Preview button -->
        
            @Html.ActionLink(" ", "FormPreview", "MainFormCreator", new
                       {
                           formid = Model.form.formId
                       },
            new { target = "_blank", @class = "btn btn-primary btn-lg glyphicon glyphicon-list-alt", @style = "background-color: black; margin: 1%;width: 90px;" })
       
    </div>
        
        <div style=" margin-left: 97.5%; margin-top: 20%; ">
        </div>
       
        <div id="Panel" onchange="showWorningSaveMsg()" style="width: 95%; margin-top: 20%; ">
            <div class="panel panel-default">
                <div class="panel-heading">
                    @Html.EditorFor(x => x.form)
                    <div id="yair">
                        @Html.Partial("_QuestionsLists", Model)
                    </div>
                </div>
            </div>
        </div>
        


        
 <script>
     function showWorningSaveMsg() {
    document.getElementById("changes").style.display = "block";
     }

     function CloseModels() {

         $('#FreeTextQuestion').modal('hide');
         $('#myModal').modal('hide');
         $('#MultipleChoiceQuestion').modal('hide');
         $('#ScaleQuestion').modal('hide');

         $('body').removeClass('modal-open');
         $('.modal-backdrop').remove();
     }

     

</script>
 


  }

 @using (Html.BeginForm())
{     
<div class="modal fade" id="exit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel" dir="rtl">האם אתה בטוח שאתה רוצה לצאת?</h4>
            </div>
            <div class="modal-body">
                <button type="submit" name="submit" value=@WorkShopActions.Exit class="btn btn-default">סגור וצא</button>
            </div>

        </div>
    </div>
</div>
}

          <!-- Edit Section -->
    <div class="modal fade" id="MySection" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" style="width:75%">
            <div class="modal-content" style="width:75%">
                <div class="modal-header" style="width:100%">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="font-size:xx-large;  text-shadow:inherit; margin-right:1%; margin-top:0%;"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel" dir="rtl" style="margin-right:40%;font-size:x-large">שאלה חדשה</h4>
                </div>

                <div class="modal-body">
                    @if (Model.NewQuestion != null)
                    {
                        Model.NewQuestion = null;
                    }
                    @Html.EditorFor(x => x.Sections)
                    @Html.EditorFor(x => x.CurrentSection)
                    @*@Html.Partial("~/Views/MainFormCreator/_intetionalqusestionpartialforadd.cshtml",Model.NewQuestion)*@

                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">סגור</button>
                    <button type="submit" class="btn btn-primary" name="submit" value="addQustion" style="margin-right:40%">שמור שאלה</button>
                </div>


            </div>
        </div>
    </div>


    <!-- popup preview -->
    @*<div class="modal fade" id="Preview" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false">
        <div class="modal-dialog" style="width:95%">

            <div class=" modal-content" style="width:93%">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="font-size:xx-large;  text-shadow:inherit; margin-right:2%; margin-top:1%;" st><span aria-hidden="true">&times;</span></button>
                <div class="modal-header" style="width:95%"></div>
                <h4 class="modal-title" id="myModalLabel" dir="rtl" style="font-size:xx-large;  text-shadow:inherit; margin-left:50%; color:blue;">מצב תצוגה</h4>

                @using (Html.BeginForm())
               
                    <div id="Panel" style="width: 90%; margin-left:2%">
                        <div class="panel panel-default" style="margin-left:0%;width: 100%;">
                            <div class=" panel-heading" style="margin-left:0%;width: 100%;">

                                <u style="font-size:xx-large;  text-shadow:inherit; margin-left:40%; color:darkblue;font-weight:bold;">@Model.form.FormName</u>
                                <br />
                                
                               
                              
                            </div>
                        </div>
                    </div>
                   
               
            </div>
        </div>
    </div>*@

       